<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass        #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric         #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies    #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts      #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiWayIf            #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings     #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell       #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-omit-interface-pragmas #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# OPTIONS_GHC -fplugin-opt PlutusTx.Plugin:context-level=3 #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-ignore-interface-pragmas #-}</span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusTx.Ratio</span><span class="hs-special">(</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Type</span></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier">Rational</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Construction</span></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#unsafeRatio"><span class="hs-identifier">unsafeRatio</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#fromInteger"><span class="hs-identifier">fromInteger</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#ratio"><span class="hs-identifier">ratio</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Other functionality</span></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#numerator"><span class="hs-identifier">numerator</span></a></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#denominator"><span class="hs-identifier">denominator</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#round"><span class="hs-identifier">round</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#truncate"><span class="hs-identifier">truncate</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#properFraction"><span class="hs-identifier">properFraction</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#recip"><span class="hs-identifier">recip</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#abs"><span class="hs-identifier">abs</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#negate"><span class="hs-identifier">negate</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#half"><span class="hs-identifier">half</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#fromGHC"><span class="hs-identifier">fromGHC</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#toGHC"><span class="hs-identifier">toGHC</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#reduce"><span class="hs-identifier">reduce</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#gcd"><span class="hs-identifier">gcd</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Applicative.html"><span class="hs-identifier">PlutusTx.Applicative</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Base.html"><span class="hs-identifier">PlutusTx.Base</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Bool.html"><span class="hs-identifier">PlutusTx.Bool</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Eq.html"><span class="hs-identifier">PlutusTx.Eq</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.ErrorCodes.html"><span class="hs-identifier">PlutusTx.ErrorCodes</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Integer.html"><span class="hs-identifier">PlutusTx.Integer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier">Integer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.IsData.html"><span class="hs-identifier">PlutusTx.IsData</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Lift.html"><span class="hs-identifier">PlutusTx.Lift</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Maybe.html"><span class="hs-identifier">PlutusTx.Maybe</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html"><span class="hs-identifier">PlutusTx.Numeric</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Ord.html"><span class="hs-identifier">PlutusTx.Ord</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Trace.html"><span class="hs-identifier">PlutusTx.Trace</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Builtins.html"><span class="hs-identifier">PlutusTx.Builtins</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Builtins</span></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">guard</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">parseJSON</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toJSON</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">object</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">withObject</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.:)</span></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Real</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ratio</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">Ord</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Show</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(*)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Haskell</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prettyprinter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;+&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-comment">-- | Represents an arbitrary-precision ratio.</span><span>
</span><span id="line-59"></span><span class="hs-keyword">data</span><span> </span><span id="Rational"><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Rational"><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-61"></span><span>    </span><span id="local-6989586621679706189"><span id="local-6989586621679706194"><span class="annot"><span class="annottext">Rational -&gt; Rational -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Rational -&gt; Rational -&gt; Bool
$c/= :: Rational -&gt; Rational -&gt; Bool
== :: Rational -&gt; Rational -&gt; Bool
$c== :: Rational -&gt; Rational -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Haskell.Eq</span></a></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span id="local-6989586621679706177"><span id="local-6989586621679706179"><span id="local-6989586621679706186"><span class="annot"><span class="annottext">Int -&gt; Rational -&gt; ShowS
[Rational] -&gt; ShowS
Rational -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Rational] -&gt; ShowS
$cshowList :: [Rational] -&gt; ShowS
show :: Rational -&gt; String
$cshow :: Rational -&gt; String
showsPrec :: Int -&gt; Rational -&gt; ShowS
$cshowsPrec :: Int -&gt; Rational -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679706173"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-66"></span><span>  </span><span id="local-6989586621679706166"><span class="annot"><span class="annottext">pretty :: forall ann. Rational -&gt; Doc ann
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706164"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706164"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679706163"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706163"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;Rational:&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706164"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706163"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">-- We maintain two invariants for Rational:</span><span>
</span><span id="line-69"></span><span class="hs-comment">--</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- 1. The denominator is greater than zero.</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- 2. The numerator and denominator are coprime.</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.Eq.html#Eq"><span class="hs-identifier hs-type">P.Eq</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">==</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706157"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706157"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706156"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706156"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706155"><span class="annot"><span class="annottext">== :: Rational -&gt; Rational -&gt; Bool
</span><a href="#local-6989586621679706155"><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706154"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706154"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706153"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706153"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706157"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706154"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="PlutusTx.Bool.html#%26%26"><span class="hs-operator hs-var">P.&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706156"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706153"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679706141"><span id="local-6989586621679706143"><span class="annot"><a href="PlutusTx.Ord.html#Ord"><span class="hs-identifier hs-type">P.Ord</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ord.html#compare"><span class="hs-pragma hs-type">compare</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-79"></span><span>  </span><span id="local-6989586621679706134"><span class="annot"><span class="annottext">compare :: Rational -&gt; Rational -&gt; Ordering
</span><a href="#local-6989586621679706134"><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706133"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706133"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706132"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706132"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706131"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706131"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706130"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706130"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><a href="PlutusTx.Ord.html#compare"><span class="hs-identifier hs-var">P.compare</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706133"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706130"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706131"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706132"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-81"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706124"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706124"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706123"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706123"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706122"><span class="annot"><span class="annottext">&lt;= :: Rational -&gt; Rational -&gt; Bool
</span><a href="#local-6989586621679706122"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;=</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706121"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706121"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706120"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706120"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706124"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706120"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3C%3D"><span class="hs-operator hs-var">P.&lt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706121"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706123"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706115"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706115"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706114"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706114"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706113"><span class="annot"><span class="annottext">&gt;= :: Rational -&gt; Rational -&gt; Bool
</span><a href="#local-6989586621679706113"><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;=</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706112"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706112"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706111"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706111"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706115"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706111"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3E%3D"><span class="hs-operator hs-var">P.&gt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706112"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706114"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-85"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706106"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706106"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706105"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706105"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706104"><span class="annot"><span class="annottext">&lt; :: Rational -&gt; Rational -&gt; Bool
</span><a href="#local-6989586621679706104"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706103"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706103"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706102"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706102"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706106"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706102"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3C"><span class="hs-operator hs-var">P.&lt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706103"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706105"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706097"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706097"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706096"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706096"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706095"><span class="annot"><span class="annottext">&gt; :: Rational -&gt; Rational -&gt; Bool
</span><a href="#local-6989586621679706095"><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706094"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706094"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706093"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706093"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706097"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706093"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3E"><span class="hs-operator hs-var">P.&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706094"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706096"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679706082"><span id="local-6989586621679706084"><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-90"></span><span>  </span><span id="local-6989586621679706076"><span class="annot"><span class="annottext">compare :: Rational -&gt; Rational -&gt; Ordering
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706074"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706074"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706073"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706073"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706072"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706072"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706071"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706071"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">compare</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706074"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706071"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706072"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706073"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706067"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706067"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706066"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706066"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706065"><span class="annot"><span class="annottext">&lt;= :: Rational -&gt; Rational -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;=</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706063"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706063"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706062"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706062"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706067"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706062"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706063"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706066"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706058"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706058"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706057"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706057"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706056"><span class="annot"><span class="annottext">&gt;= :: Rational -&gt; Rational -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;=</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706055"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706055"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706054"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706054"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706058"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706054"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706055"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706057"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706050"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706050"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706049"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706049"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706048"><span class="annot"><span class="annottext">&lt; :: Rational -&gt; Rational -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706046"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706046"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706045"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706045"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706050"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706045"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706046"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706049"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706041"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706041"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706040"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706040"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706039"><span class="annot"><span class="annottext">&gt; :: Rational -&gt; Rational -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706037"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706037"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706036"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706036"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706041"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706036"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706037"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706040"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html#AdditiveSemigroup"><span class="hs-identifier hs-type">P.AdditiveSemigroup</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">+</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706031"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706031"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706030"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706030"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679706029"><span class="annot"><span class="annottext">+ :: Rational -&gt; Rational -&gt; Rational
</span><a href="#local-6989586621679706029"><span class="hs-operator hs-var hs-var hs-var hs-var">+</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706028"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706028"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679706027"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706027"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679706022"><span class="annot"><span class="annottext">newNum :: Integer
</span><a href="#local-6989586621679706022"><span class="hs-identifier hs-var hs-var">newNum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706031"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706027"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2B"><span class="hs-operator hs-var">P.+</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706028"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706030"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>        </span><span id="local-6989586621679706020"><span class="annot"><span class="annottext">newDen :: Integer
</span><a href="#local-6989586621679706020"><span class="hs-identifier hs-var hs-var">newDen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706030"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706027"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-101"></span><span>        </span><span id="local-6989586621679706019"><span class="annot"><span class="annottext">gcd' :: Integer
</span><a href="#local-6989586621679706019"><span class="hs-identifier hs-var hs-var">gcd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#euclid"><span class="hs-identifier hs-var">euclid</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706022"><span class="hs-identifier hs-var">newNum</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706020"><span class="hs-identifier hs-var">newDen</span></a></span><span>
</span><span id="line-102"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706022"><span class="hs-identifier hs-var">newNum</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706019"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706020"><span class="hs-identifier hs-var">newDen</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706019"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html#AdditiveMonoid"><span class="hs-identifier hs-type">P.AdditiveMonoid</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html#zero"><span class="hs-pragma hs-type">zero</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-107"></span><span>  </span><span id="local-6989586621679706009"><span class="annot"><span class="annottext">zero :: Rational
</span><a href="#local-6989586621679706009"><span class="hs-identifier hs-var hs-var hs-var hs-var">zero</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#one"><span class="hs-identifier hs-var">P.one</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html#AdditiveGroup"><span class="hs-identifier hs-type">P.AdditiveGroup</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">-</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679706001"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706001"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679706000"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706000"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679705999"><span class="annot"><span class="annottext">- :: Rational -&gt; Rational -&gt; Rational
</span><a href="#local-6989586621679705999"><span class="hs-glyph hs-var hs-var hs-var hs-var">-</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705998"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705998"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679705997"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705997"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679705993"><span class="annot"><span class="annottext">newNum :: Integer
</span><a href="#local-6989586621679705993"><span class="hs-identifier hs-var hs-var">newNum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706001"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705997"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#-"><span class="hs-operator hs-var">P.-</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705998"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706000"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>        </span><span id="local-6989586621679705991"><span class="annot"><span class="annottext">newDen :: Integer
</span><a href="#local-6989586621679705991"><span class="hs-identifier hs-var hs-var">newDen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679706000"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705997"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-114"></span><span>        </span><span id="local-6989586621679705990"><span class="annot"><span class="annottext">gcd' :: Integer
</span><a href="#local-6989586621679705990"><span class="hs-identifier hs-var hs-var">gcd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#euclid"><span class="hs-identifier hs-var">euclid</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705993"><span class="hs-identifier hs-var">newNum</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705991"><span class="hs-identifier hs-var">newDen</span></a></span><span>
</span><span id="line-115"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705993"><span class="hs-identifier hs-var">newNum</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705990"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705991"><span class="hs-identifier hs-var">newDen</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705990"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html#MultiplicativeSemigroup"><span class="hs-identifier hs-type">P.MultiplicativeSemigroup</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">*</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705986"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705986"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705985"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705985"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679705984"><span class="annot"><span class="annottext">* :: Rational -&gt; Rational -&gt; Rational
</span><a href="#local-6989586621679705984"><span class="hs-operator hs-var hs-var hs-var hs-var">*</span></a></span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705983"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705983"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621679705982"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705982"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679705980"><span class="annot"><span class="annottext">newNum :: Integer
</span><a href="#local-6989586621679705980"><span class="hs-identifier hs-var hs-var">newNum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705986"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705983"><span class="hs-identifier hs-var">n'</span></a></span><span>
</span><span id="line-122"></span><span>        </span><span id="local-6989586621679705978"><span class="annot"><span class="annottext">newDen :: Integer
</span><a href="#local-6989586621679705978"><span class="hs-identifier hs-var hs-var">newDen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705985"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705982"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-123"></span><span>        </span><span id="local-6989586621679705977"><span class="annot"><span class="annottext">gcd' :: Integer
</span><a href="#local-6989586621679705977"><span class="hs-identifier hs-var hs-var">gcd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#euclid"><span class="hs-identifier hs-var">euclid</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705980"><span class="hs-identifier hs-var">newNum</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705978"><span class="hs-identifier hs-var">newDen</span></a></span><span>
</span><span id="line-124"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705980"><span class="hs-identifier hs-var">newNum</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705977"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705978"><span class="hs-identifier hs-var">newDen</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705977"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html#MultiplicativeMonoid"><span class="hs-identifier hs-type">P.MultiplicativeMonoid</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html#one"><span class="hs-pragma hs-type">one</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-129"></span><span>  </span><span id="local-6989586621679705969"><span class="annot"><span class="annottext">one :: Rational
</span><a href="#local-6989586621679705969"><span class="hs-identifier hs-var hs-var hs-var hs-var">one</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#one"><span class="hs-identifier hs-var">P.one</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#one"><span class="hs-identifier hs-var">P.one</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html#Module"><span class="hs-identifier hs-type">P.Module</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Numeric.html#scale"><span class="hs-pragma hs-type">scale</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-133"></span><span>  </span><span id="local-6989586621679705960"><span class="annot"><span class="annottext">scale :: Integer -&gt; Rational -&gt; Rational
</span><a href="#local-6989586621679705960"><span class="hs-identifier hs-var hs-var hs-var hs-var">scale</span></a></span></span><span> </span><span id="local-6989586621679705959"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705959"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705958"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705958"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705957"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705957"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679705955"><span class="annot"><span class="annottext">newNum :: Integer
</span><a href="#local-6989586621679705955"><span class="hs-identifier hs-var hs-var">newNum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705959"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2A"><span class="hs-operator hs-var">P.*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705958"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-134"></span><span>                               </span><span id="local-6989586621679705954"><span class="annot"><span class="annottext">gcd' :: Integer
</span><a href="#local-6989586621679705954"><span class="hs-identifier hs-var hs-var">gcd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#euclid"><span class="hs-identifier hs-var">euclid</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705955"><span class="hs-identifier hs-var">newNum</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705957"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705955"><span class="hs-identifier hs-var">newNum</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705954"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705957"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705954"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.IsData.Class.html#ToData"><span class="hs-identifier hs-type">P.ToData</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.IsData.Class.html#toBuiltinData"><span class="hs-pragma hs-type">toBuiltinData</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-140"></span><span>  </span><span id="local-6989586621679705944"><span class="annot"><span class="annottext">toBuiltinData :: Rational -&gt; BuiltinData
</span><a href="#local-6989586621679705944"><span class="hs-identifier hs-var hs-var hs-var hs-var">toBuiltinData</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705943"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705943"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705942"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705942"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. ToData a =&gt; a -&gt; BuiltinData
</span><a href="PlutusTx.IsData.Class.html#toBuiltinData"><span class="hs-identifier hs-var">P.toBuiltinData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705943"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705942"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-comment">-- These instances ensure that the following invariants don't break:</span><span>
</span><span id="line-143"></span><span class="hs-comment">--</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- 1. The denominator is greater than 0; and</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- 2. The numerator and denominator are coprime.</span><span>
</span><span id="line-146"></span><span class="hs-comment">--</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- For invariant 1, fromBuiltinData yields Nothing on violation, while</span><span>
</span><span id="line-148"></span><span class="hs-comment">-- unsafeFromData calls error. Invariant 2 is kept maintained by use of</span><span>
</span><span id="line-149"></span><span class="hs-comment">-- unsafeRatio.</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.IsData.Class.html#FromData"><span class="hs-identifier hs-type">P.FromData</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.IsData.Class.html#fromBuiltinData"><span class="hs-pragma hs-type">fromBuiltinData</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-153"></span><span>  </span><span id="local-6989586621679705923"><span class="annot"><span class="annottext">fromBuiltinData :: BuiltinData -&gt; Maybe Rational
</span><a href="#local-6989586621679705923"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromBuiltinData</span></a></span></span><span> </span><span id="local-6989586621679705922"><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679705922"><span class="hs-identifier hs-var">dat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679705921"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705921"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679705920"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705920"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. FromData a =&gt; BuiltinData -&gt; Maybe a
</span><a href="PlutusTx.IsData.Class.html#fromBuiltinData"><span class="hs-identifier hs-var">P.fromBuiltinData</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679705922"><span class="hs-identifier hs-var">dat</span></a></span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">guard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705920"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%2F%3D"><span class="hs-operator hs-var">P./=</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="PlutusTx.Applicative.html#pure"><span class="hs-identifier hs-var">P.pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="PlutusTx.Base.html#."><span class="hs-operator hs-var">P..</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#unsafeRatio"><span class="hs-identifier hs-var">unsafeRatio</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705921"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="PlutusTx.Base.html#%24"><span class="hs-operator hs-var">P.$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705920"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusTx.IsData.Class.html#UnsafeFromData"><span class="hs-identifier hs-type">P.UnsafeFromData</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.IsData.Class.html#unsafeFromBuiltinData"><span class="hs-pragma hs-type">unsafeFromBuiltinData</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621679705906"><span class="annot"><span class="annottext">unsafeFromBuiltinData :: BuiltinData -&gt; Rational
</span><a href="#local-6989586621679705906"><span class="hs-identifier hs-var hs-var hs-var hs-var">unsafeFromBuiltinData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="PlutusTx.Base.html#uncurry"><span class="hs-identifier hs-var">P.uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#unsafeRatio"><span class="hs-identifier hs-var">unsafeRatio</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="PlutusTx.Base.html#."><span class="hs-operator hs-var">P..</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. UnsafeFromData a =&gt; BuiltinData -&gt; a
</span><a href="PlutusTx.IsData.Class.html#unsafeFromBuiltinData"><span class="hs-identifier hs-var">P.unsafeFromBuiltinData</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-comment">-- | This mimics the behaviour of Aeson's instance for 'GHC.Rational'.</span><span>
</span><span id="line-163"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679705898"><span id="local-6989586621679705900"><span id="local-6989586621679705902"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621679705890"><span class="annot"><span class="annottext">toJSON :: Rational -&gt; Value
</span><a href="#local-6989586621679705890"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705889"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705889"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705888"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705888"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-166"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;numerator&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705889"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;denominator&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705888"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-comment">-- | This mimics the behaviour of Aeson's instance for 'GHC.Rational'.</span><span>
</span><span id="line-171"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679705885"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-172"></span><span>  </span><span id="local-6989586621679705871"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Rational
</span><a href="#local-6989586621679705871"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rational&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">Haskell.$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679705870"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679705870"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-173"></span><span>    </span><span id="local-6989586621679705869"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705869"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679705870"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;numerator&quot;</span></span><span>
</span><span id="line-174"></span><span>    </span><span id="local-6989586621679705868"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705868"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679705870"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;denominator&quot;</span></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Maybe Rational
</span><a href="PlutusTx.Ratio.html#ratio"><span class="hs-identifier hs-var">ratio</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705869"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705868"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-176"></span><span>      </span><span class="annot"><span class="annottext">Maybe Rational
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Haskell.Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Haskell.fail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Zero denominator is invalid.&quot;</span></span><span>
</span><span id="line-177"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Haskell.Just</span></a></span><span> </span><span id="local-6989586621679705867"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705867"><span class="hs-identifier hs-var">r</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Haskell.pure</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705867"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">-- | Makes a 'Rational' from a numerator and a denominator.</span><span>
</span><span id="line-180"></span><span class="hs-comment">--</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- = Important note</span><span>
</span><span id="line-182"></span><span class="hs-comment">--</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- If given a zero denominator, this function will error. If you don't mind a</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- size increase, and care about safety, use 'ratio' instead.</span><span>
</span><span id="line-185"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#unsafeRatio"><span class="hs-pragma hs-type">unsafeRatio</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-186"></span><span class="annot"><a href="PlutusTx.Ratio.html#unsafeRatio"><span class="hs-identifier hs-type">unsafeRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-187"></span><span id="unsafeRatio"><span class="annot"><span class="annottext">unsafeRatio :: Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#unsafeRatio"><span class="hs-identifier hs-var hs-var">unsafeRatio</span></a></span></span><span> </span><span id="local-6989586621679705866"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705866"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705865"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705865"><span class="hs-identifier hs-var">d</span></a></span></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705865"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. () -&gt; a
</span><a href="PlutusTx.Builtins.html#error"><span class="hs-identifier hs-var">Builtins.error</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705865"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3C"><span class="hs-operator hs-var">P.&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#unsafeRatio"><span class="hs-identifier hs-var">unsafeRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#negate"><span class="hs-identifier hs-var">P.negate</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705866"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#negate"><span class="hs-identifier hs-var">P.negate</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705865"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">P.True</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679705862"><span class="annot"><span class="annottext">gcd' :: Integer
</span><a href="#local-6989586621679705862"><span class="hs-identifier hs-var hs-var">gcd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#euclid"><span class="hs-identifier hs-var">euclid</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705866"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705865"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-192"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705866"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705862"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705865"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705862"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="hs-comment">-- | Safely constructs a 'Rational' from a numerator and a denominator. Returns</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- 'Nothing' if given a zero denominator.</span><span>
</span><span id="line-197"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#ratio"><span class="hs-pragma hs-type">ratio</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-198"></span><span class="annot"><a href="PlutusTx.Ratio.html#ratio"><span class="hs-identifier hs-type">ratio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">P.Maybe</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-199"></span><span id="ratio"><span class="annot"><span class="annottext">ratio :: Integer -&gt; Integer -&gt; Maybe Rational
</span><a href="PlutusTx.Ratio.html#ratio"><span class="hs-identifier hs-var hs-var">ratio</span></a></span></span><span> </span><span id="local-6989586621679705861"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705861"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705860"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705860"><span class="hs-identifier hs-var">d</span></a></span></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705860"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">P.Nothing</span></a></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705860"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3C"><span class="hs-operator hs-var">P.&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">P.Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#unsafeRatio"><span class="hs-identifier hs-var">unsafeRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#negate"><span class="hs-identifier hs-var">P.negate</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705861"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#negate"><span class="hs-identifier hs-var">P.negate</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705860"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">P.True</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679705859"><span class="annot"><span class="annottext">gcd' :: Integer
</span><a href="#local-6989586621679705859"><span class="hs-identifier hs-var hs-var">gcd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#euclid"><span class="hs-identifier hs-var">euclid</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705861"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705860"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-204"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">P.Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="PlutusTx.Base.html#."><span class="hs-operator hs-var">P..</span></a></span><span>
</span><span id="line-205"></span><span>        </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705861"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705859"><span class="hs-identifier hs-var">gcd'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="PlutusTx.Base.html#%24"><span class="hs-operator hs-var">P.$</span></a></span><span>
</span><span id="line-206"></span><span>        </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705860"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705859"><span class="hs-identifier hs-var">gcd'</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-comment">-- | Converts a 'Rational' to a GHC 'Ratio.Rational', preserving value. Does not</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- work on-chain.</span><span>
</span><span id="line-210"></span><span class="annot"><a href="PlutusTx.Ratio.html#toGHC"><span class="hs-identifier hs-type">toGHC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Ratio.Rational</span></a></span><span>
</span><span id="line-211"></span><span id="toGHC"><span class="annot"><span class="annottext">toGHC :: Rational -&gt; Rational
</span><a href="PlutusTx.Ratio.html#toGHC"><span class="hs-identifier hs-var hs-var">toGHC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705858"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705858"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705857"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705857"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705858"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Integral a =&gt; a -&gt; a -&gt; Ratio a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">Ratio.%</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705857"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">-- | Returns the numerator of its argument.</span><span>
</span><span id="line-214"></span><span class="hs-comment">--</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- = Note</span><span>
</span><span id="line-216"></span><span class="hs-comment">--</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- It is /not/ true in general that @'numerator' '&lt;$&gt;' 'ratio' x y = x@; this</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- will only hold if @x@ and @y@ are coprime. This is due to 'Rational'</span><span>
</span><span id="line-219"></span><span class="hs-comment">-- normalizing the numerator and denominator.</span><span>
</span><span id="line-220"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#numerator"><span class="hs-pragma hs-type">numerator</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-221"></span><span class="annot"><a href="PlutusTx.Ratio.html#numerator"><span class="hs-identifier hs-type">numerator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-222"></span><span id="numerator"><span class="annot"><span class="annottext">numerator :: Rational -&gt; Integer
</span><a href="PlutusTx.Ratio.html#numerator"><span class="hs-identifier hs-var hs-var">numerator</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705855"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705855"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705855"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-comment">-- | Returns the denominator of its argument. This will always be greater than,</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- or equal to, 1, although the type does not describe this.</span><span>
</span><span id="line-226"></span><span class="hs-comment">--</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- = Note</span><span>
</span><span id="line-228"></span><span class="hs-comment">--</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- It is /not/ true in general that @'denominator' '&lt;$&gt;' 'ratio' x y = y@; this</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- will only hold if @x@ and @y@ are coprime. This is due to 'Rational'</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- normalizing the numerator and denominator.</span><span>
</span><span id="line-232"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#denominator"><span class="hs-pragma hs-type">denominator</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-233"></span><span class="annot"><a href="PlutusTx.Ratio.html#denominator"><span class="hs-identifier hs-type">denominator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-234"></span><span id="denominator"><span class="annot"><span class="annottext">denominator :: Rational -&gt; Integer
</span><a href="PlutusTx.Ratio.html#denominator"><span class="hs-identifier hs-var hs-var">denominator</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679705854"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705854"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705854"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-comment">-- | 0.5</span><span>
</span><span id="line-237"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#half"><span class="hs-pragma hs-type">half</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-238"></span><span class="annot"><a href="PlutusTx.Ratio.html#half"><span class="hs-identifier hs-type">half</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-239"></span><span id="half"><span class="annot"><span class="annottext">half :: Rational
</span><a href="PlutusTx.Ratio.html#half"><span class="hs-identifier hs-var hs-var">half</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">2</span></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-comment">-- | Converts an 'Integer' into the equivalent 'Rational'.</span><span>
</span><span id="line-242"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#fromInteger"><span class="hs-pragma hs-type">fromInteger</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-243"></span><span class="annot"><a href="PlutusTx.Ratio.html#fromInteger"><span class="hs-identifier hs-type">fromInteger</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-244"></span><span id="fromInteger"><span class="annot"><span class="annottext">fromInteger :: Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#fromInteger"><span class="hs-identifier hs-var hs-var">fromInteger</span></a></span></span><span> </span><span id="local-6989586621679705853"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705853"><span class="hs-identifier hs-var">num</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705853"><span class="hs-identifier hs-var">num</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#one"><span class="hs-identifier hs-var">P.one</span></a></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-comment">-- | Converts a GHC 'Ratio.Rational', preserving value. Does not work on-chain.</span><span>
</span><span id="line-247"></span><span class="annot"><a href="PlutusTx.Ratio.html#fromGHC"><span class="hs-identifier hs-type">fromGHC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Ratio.Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-248"></span><span id="fromGHC"><span class="annot"><span class="annottext">fromGHC :: Rational -&gt; Rational
</span><a href="PlutusTx.Ratio.html#fromGHC"><span class="hs-identifier hs-var hs-var">fromGHC</span></a></span></span><span> </span><span id="local-6989586621679705852"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705852"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#unsafeRatio"><span class="hs-identifier hs-var">unsafeRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ratio a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Ratio.numerator</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705852"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ratio a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Ratio.denominator</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705852"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-comment">-- | Produces the additive inverse of its argument.</span><span>
</span><span id="line-251"></span><span class="hs-comment">--</span><span>
</span><span id="line-252"></span><span class="hs-comment">-- = Note</span><span>
</span><span id="line-253"></span><span class="hs-comment">--</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- This is specialized for 'Rational'; use this instead of the generic version</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- of this function, as it is significantly smaller on-chain.</span><span>
</span><span id="line-256"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#negate"><span class="hs-pragma hs-type">negate</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-257"></span><span class="annot"><a href="PlutusTx.Ratio.html#negate"><span class="hs-identifier hs-type">negate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-258"></span><span id="negate"><span class="annot"><span class="annottext">negate :: Rational -&gt; Rational
</span><a href="PlutusTx.Ratio.html#negate"><span class="hs-identifier hs-var hs-var">negate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705849"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705849"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705848"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705848"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#negate"><span class="hs-identifier hs-var">P.negate</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705849"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705848"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-comment">-- | Returns the absolute value of its argument.</span><span>
</span><span id="line-261"></span><span class="hs-comment">--</span><span>
</span><span id="line-262"></span><span class="hs-comment">-- = Note</span><span>
</span><span id="line-263"></span><span class="hs-comment">--</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- This is specialized for 'Rational'; use this instead of the generic version</span><span>
</span><span id="line-265"></span><span class="hs-comment">-- in @PlutusTx.Numeric@, as said generic version produces much larger on-chain</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- code than the specialized version here.</span><span>
</span><span id="line-267"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#abs"><span class="hs-pragma hs-type">abs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-268"></span><span class="annot"><a href="PlutusTx.Ratio.html#abs"><span class="hs-identifier hs-type">abs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-269"></span><span id="abs"><span class="annot"><span class="annottext">abs :: Rational -&gt; Rational
</span><a href="PlutusTx.Ratio.html#abs"><span class="hs-identifier hs-var hs-var">abs</span></a></span></span><span> </span><span id="local-6989586621679705847"><span class="annot"><span class="annottext">rat :: Rational
</span><a href="#local-6989586621679705847"><span class="hs-identifier hs-var">rat</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705846"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705846"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705845"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705845"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705846"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3C"><span class="hs-operator hs-var">P.&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#negate"><span class="hs-identifier hs-var">P.negate</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705846"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705845"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">P.True</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705847"><span class="hs-identifier hs-var">rat</span></a></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-comment">-- | @'properFraction' r@ returns the pair @(n, f)@, such that all of the</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- following hold:</span><span>
</span><span id="line-275"></span><span class="hs-comment">--</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- * @'fromInteger' n 'P.+' f = r@;</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- * @n@ and @f@ both have the same sign as @r@; and</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- * @'abs' f 'P.&lt;' 'P.one'@.</span><span>
</span><span id="line-279"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#properFraction"><span class="hs-pragma hs-type">properFraction</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-280"></span><span class="annot"><a href="PlutusTx.Ratio.html#properFraction"><span class="hs-identifier hs-type">properFraction</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span id="properFraction"><span class="annot"><span class="annottext">properFraction :: Rational -&gt; (Integer, Rational)
</span><a href="PlutusTx.Ratio.html#properFraction"><span class="hs-identifier hs-var hs-var">properFraction</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705844"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705844"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705843"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705843"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705844"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705843"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-283"></span><span>   </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705844"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#remainderInteger"><span class="hs-operator hs-var">`Builtins.remainderInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705843"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705843"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-comment">-- | Gives the reciprocal of the argument; specifically, for @r 'P./='</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- 'P.zero'@, @r 'P.*' 'recip' r = 'P.one'@.</span><span>
</span><span id="line-287"></span><span class="hs-comment">--</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- = Important note</span><span>
</span><span id="line-289"></span><span class="hs-comment">--</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- The reciprocal of zero is mathematically undefined; thus, @'recip' 'P.zero'@</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- will error. Use with care.</span><span>
</span><span id="line-292"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#recip"><span class="hs-pragma hs-type">recip</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-293"></span><span class="annot"><a href="PlutusTx.Ratio.html#recip"><span class="hs-identifier hs-type">recip</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-294"></span><span id="recip"><span class="annot"><span class="annottext">recip :: Rational -&gt; Rational
</span><a href="PlutusTx.Ratio.html#recip"><span class="hs-identifier hs-var hs-var">recip</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705841"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705841"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705840"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705840"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705841"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. () -&gt; a
</span><a href="PlutusTx.Builtins.html#error"><span class="hs-identifier hs-var">Builtins.error</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705841"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3C"><span class="hs-operator hs-var">P.&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#negate"><span class="hs-identifier hs-var">P.negate</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705840"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#negate"><span class="hs-identifier hs-var">P.negate</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705841"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">P.True</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705840"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705841"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- | Returns the whole-number part of its argument, dropping any leftover</span><span>
</span><span id="line-300"></span><span class="hs-comment">-- fractional part. More precisely, @'truncate' r = n@ where @(n, _) =</span><span>
</span><span id="line-301"></span><span class="hs-comment">-- 'properFraction' r@, but is much more efficient.</span><span>
</span><span id="line-302"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#truncate"><span class="hs-pragma hs-type">truncate</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-303"></span><span class="annot"><a href="PlutusTx.Ratio.html#truncate"><span class="hs-identifier hs-type">truncate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-304"></span><span id="truncate"><span class="annot"><span class="annottext">truncate :: Rational -&gt; Integer
</span><a href="PlutusTx.Ratio.html#truncate"><span class="hs-identifier hs-var hs-var">truncate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span id="local-6989586621679705839"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705839"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679705838"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705838"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705839"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705838"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span class="hs-comment">-- | @'round' r@ returns the nearest 'Integer' value to @r@. If @r@ is</span><span>
</span><span id="line-307"></span><span class="hs-comment">-- equidistant between two values, the even value will be given.</span><span>
</span><span id="line-308"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#round"><span class="hs-pragma hs-type">round</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-309"></span><span class="annot"><a href="PlutusTx.Ratio.html#round"><span class="hs-identifier hs-type">round</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-310"></span><span id="round"><span class="annot"><span class="annottext">round :: Rational -&gt; Integer
</span><a href="PlutusTx.Ratio.html#round"><span class="hs-identifier hs-var hs-var">round</span></a></span></span><span> </span><span id="local-6989586621679705837"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705837"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679705836"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705836"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679705835"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705835"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; (Integer, Rational)
</span><a href="PlutusTx.Ratio.html#properFraction"><span class="hs-identifier hs-var">properFraction</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705837"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-312"></span><span>      </span><span id="local-6989586621679705828"><span class="annot"><span class="annottext">m :: Integer
</span><a href="#local-6989586621679705828"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705835"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3C"><span class="hs-operator hs-var">P.&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705836"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#-"><span class="hs-operator hs-var">P.-</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#one"><span class="hs-identifier hs-var">P.one</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705836"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveSemigroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#%2B"><span class="hs-operator hs-var">P.+</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. MultiplicativeMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#one"><span class="hs-identifier hs-var">P.one</span></a></span><span>
</span><span id="line-313"></span><span>      </span><span id="local-6989586621679705826"><span class="annot"><span class="annottext">flag :: Rational
</span><a href="#local-6989586621679705826"><span class="hs-identifier hs-var hs-var">flag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Rational
</span><a href="PlutusTx.Ratio.html#abs"><span class="hs-identifier hs-var">abs</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705835"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveGroup a =&gt; a -&gt; a -&gt; a
</span><a href="PlutusTx.Numeric.html#-"><span class="hs-operator hs-var">P.-</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="PlutusTx.Ratio.html#half"><span class="hs-identifier hs-var">half</span></a></span><span>
</span><span id="line-314"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span>
</span><span id="line-315"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705826"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Ord.html#%3C"><span class="hs-operator hs-var">P.&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705836"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-316"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679705826"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#modInteger"><span class="hs-identifier hs-var">Builtins.modInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705836"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span>
</span><span id="line-317"></span><span>                                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705836"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-318"></span><span>                                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705828"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-319"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">P.True</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705828"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-comment">-- From GHC.Real</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- | @'gcd' x y@ is the non-negative factor of both @x@ and @y@ of which</span><span>
</span><span id="line-323"></span><span class="hs-comment">-- every common factor of @x@ and @y@ is also a factor; for example</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- @'gcd' 4 2 = 2@, @'gcd' (-4) 6 = 2@, @'gcd' 0 4@ = @4@. @'gcd' 0 0@ = @0@.</span><span>
</span><span id="line-325"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#gcd"><span class="hs-pragma hs-type">gcd</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-326"></span><span class="annot"><a href="PlutusTx.Ratio.html#gcd"><span class="hs-identifier hs-type">gcd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-327"></span><span id="gcd"><span class="annot"><span class="annottext">gcd :: Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#gcd"><span class="hs-identifier hs-var hs-var">gcd</span></a></span></span><span> </span><span id="local-6989586621679705824"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705824"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679705823"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705823"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="#local-6989586621679705822"><span class="hs-identifier hs-var">gcd'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall n. (Ord n, AdditiveGroup n) =&gt; n -&gt; n
</span><a href="PlutusTx.Numeric.html#abs"><span class="hs-identifier hs-var">P.abs</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705824"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall n. (Ord n, AdditiveGroup n) =&gt; n -&gt; n
</span><a href="PlutusTx.Numeric.html#abs"><span class="hs-identifier hs-var">P.abs</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705823"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-328"></span><span>    </span><span id="local-6989586621679705822"><span class="annot"><span class="annottext">gcd' :: Integer -&gt; Integer -&gt; Integer
</span><a href="#local-6989586621679705822"><span class="hs-identifier hs-var hs-var">gcd'</span></a></span></span><span> </span><span id="local-6989586621679705818"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705818"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679705817"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705817"><span class="hs-identifier hs-var">b'</span></a></span></span><span>
</span><span id="line-329"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705817"><span class="hs-identifier hs-var">b'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705818"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-330"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">P.True</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="#local-6989586621679705822"><span class="hs-identifier hs-var">gcd'</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705817"><span class="hs-identifier hs-var">b'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705818"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#remainderInteger"><span class="hs-operator hs-var">`Builtins.remainderInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705817"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-comment">-- From GHC.Real</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- | Given a numerator and denominator, produces a 'Rational' by dividing both</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- numerator and denominator by their greatest common divisor.</span><span>
</span><span id="line-335"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#reduce"><span class="hs-pragma hs-type">reduce</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-336"></span><span class="annot"><a href="PlutusTx.Ratio.html#reduce"><span class="hs-identifier hs-type">reduce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-type">Rational</span></a></span><span>
</span><span id="line-337"></span><span id="reduce"><span class="annot"><span class="annottext">reduce :: Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#reduce"><span class="hs-identifier hs-var hs-var">reduce</span></a></span></span><span> </span><span id="local-6989586621679705816"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705816"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679705815"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705815"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705815"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. BuiltinString -&gt; a
</span><a href="PlutusTx.Trace.html#traceError"><span class="hs-identifier hs-var">P.traceError</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinString
</span><a href="PlutusTx.ErrorCodes.html#ratioHasZeroDenominatorError"><span class="hs-identifier hs-var">P.ratioHasZeroDenominatorError</span></a></span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">P.True</span></a></span><span>     </span><span class="hs-glyph">=</span><span>
</span><span id="line-340"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679705812"><span class="annot"><span class="annottext">d :: Integer
</span><a href="#local-6989586621679705812"><span class="hs-identifier hs-var hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#gcd"><span class="hs-identifier hs-var">gcd</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705816"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705815"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-341"></span><span>          </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Rational
</span><a href="PlutusTx.Ratio.html#Rational"><span class="hs-identifier hs-var">Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705816"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705812"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705815"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#quotientInteger"><span class="hs-operator hs-var">`Builtins.quotientInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705812"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span class="hs-comment">-- Helpers</span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span class="hs-comment">-- Euclid's algorithm</span><span>
</span><span id="line-347"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusTx.Ratio.html#euclid"><span class="hs-pragma hs-type">euclid</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-348"></span><span class="annot"><a href="PlutusTx.Ratio.html#euclid"><span class="hs-identifier hs-type">euclid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.3/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-349"></span><span id="euclid"><span class="annot"><span class="annottext">euclid :: Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#euclid"><span class="hs-identifier hs-var hs-var">euclid</span></a></span></span><span> </span><span id="local-6989586621679705811"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705811"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679705810"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705810"><span class="hs-identifier hs-var">y</span></a></span></span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705810"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="PlutusTx.Eq.html#%3D%3D"><span class="hs-operator hs-var">P.==</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. AdditiveMonoid a =&gt; a
</span><a href="PlutusTx.Numeric.html#zero"><span class="hs-identifier hs-var">P.zero</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705811"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-351"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">P.True</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Ratio.html#euclid"><span class="hs-identifier hs-var">euclid</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705810"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705811"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
</span><a href="PlutusTx.Builtins.html#modInteger"><span class="hs-operator hs-var">`Builtins.modInteger`</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679705810"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span id="local-6989586621679705806"><span id="local-6989586621679705808"><span class="hs-identifier">P.makeLift</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Rational</span></span></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="hs-comment">{- HLINT ignore -}</span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span class="hs-comment">{- Note [Ratio]

An important invariant is that the denominator is always positive. This is
enforced by

* Construction of 'Rational' numbers with 'unsafeRational' (the constructor
  of 'Rational' is not exposed)
* Normalizing after every numeric operation.

The 'StdLib.Spec' module has some property tests that check the behaviour of
'round', 'truncate', '&gt;=', etc. against that of their counterparts in
'GHC.Real'.

-}</span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">{- NOTE [Integer division operations]

Plutus Core provides built-in functions 'divideInteger', 'modInteger',
'quotientInteger' and 'remainderInteger' which are implemented as the Haskell
functions 'div', 'mod', 'quot', and 'rem' respectively.

The operations 'div' and 'mod' go together, as do 'quot' and 'rem': * DO NOT use
'div' with 'rem' or 'quot' with 'mod' *.  For most purposes users shoud probably
use 'div' and 'mod': see below for details.

For any integers a and b with b nonzero we have

  a * (a  `div` b) + a `mod` b = a
  a * (a `quot` b) + a `rem` b = a

(all operations give a &quot;divide by zero&quot; error if b = 0).  The analagous
identities for div/rem and quot/mod don't hold in general, and this can
lead to problems if you use the wrong combination of operations.

For positive divisors b, div truncates downwards and mod always returns a
non-negative result (0 &lt;= a `mod` b &lt;= b-1), which is consistent with standard
mathematical practice.  The `quot` operation truncates towards zero and `rem`
will give a negative remainder if a&lt;0 and b&gt;0.  If a&lt;0 and b&lt;0 then `mod` willl
also yield a negative result.  Results for different combinations of signs are
shown below.

-------------------------------
|   n  d | div mod | quot rem |
|-----------------------------|
|  41  5 |  8   1  |   8   1  |
| -41  5 | -9   4  |  -8  -1  |
|  41 -5 | -9  -4  |  -8   1  |
| -41 -5 |  8  -1  |   8  -1  |
-------------------------------

For many purposes (in particular if you're doing modular arithmetic),
a positive remainder is what you want.  Using 'div' and 'mod' achieves
this for positive values of b (but not for b negative, although doing
artimetic modulo a negative number would be unusual).

There is another possibility (Euclidean division) which is arguably more
mathematically correct than both div/mod and quot/rem. Given integers a and b
with b != 0, this returns numbers q and r with a = q*b+r and 0 &lt;= r &lt; |b|.  For
the numbers above this gives

-------------------
|   n  d |  q   r |
|-----------------|
|  41  5 |  8   1 |
| -41  5 | -9   4 |
|  41 -5 | -8   1 |
| -41 -5 |  9   4 |
-------------------

We get a positive remainder in all cases, but note for instance that the pairs
(41,5) and (-41,-5) give different results, which might be unexpected.

For a discussion of the pros and cons of various versions of integer division,
see Raymond T. Boute, &quot;The Euclidean definition of the functions div and mod&quot;,
ACM Transactions on Programming Languages and Systems, April 1992.  (PDF at
https://core.ac.uk/download/pdf/187613369.pdf)
-}</span><span>
</span><span id="line-434"></span></pre></body></html>